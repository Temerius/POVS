<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sea Defenders - Standalone</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background: linear-gradient(180deg, #87CEEB 0%, #4682B4 50%, #191970 100%);
            font-family: Arial, sans-serif;
            overflow: hidden;
        }

        .game-container {
            position: relative;
            width: 100vw;
            height: 100vh;
        }

        .game-canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }

        .instructions {
            position: absolute;
            bottom: 10px;
            right: 10px;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 15px;
            border-radius: 8px;
            max-width: 300px;
            font-size: 12px;
            z-index: 10;
        }

        .instructions h3 {
            margin: 0 0 10px 0;
            color: #FFD700;
        }

        .instructions ul {
            margin: 0;
            padding-left: 15px;
        }

        .instructions li {
            margin: 5px 0;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <canvas id="gameCanvas" class="game-canvas"></canvas>
        
        <div class="instructions">
            <h3>üåä Sea Defenders</h3>
            <ul>
                <li><strong>A</strong> - –¥–≤–∏–∂–µ–Ω–∏–µ –≤–ª–µ–≤–æ (—Å—Ç—Ä–µ–ª—å–±–∞ –≤–ø—Ä–∞–≤–æ)</li>
                <li><strong>W</strong> - –¥–≤–∏–∂–µ–Ω–∏–µ –≤–ø—Ä–∞–≤–æ (—Å—Ç—Ä–µ–ª—å–±–∞ –≤–ª–µ–≤–æ)</li>
                <li><strong>SPACE</strong> - —Å—Ç—Ä–µ–ª—å–±–∞</li>
                <li><strong>ESC</strong> - –ø–∞—É–∑–∞/–ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å</li>
                <li><strong>–ó–µ—Ä–∫–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞:</strong> –¥–≤–∏–∂–µ–Ω–∏–µ –≤–ª–µ–≤–æ = —Å—Ç—Ä–µ–ª—å–±–∞ –≤–ø—Ä–∞–≤–æ</li>
                <li><strong>–®–ª—é–ø–∫–∏:</strong> –±—ã—Å—Ç—Ä—ã–µ, 1 –ø–æ–ø–∞–¥–∞–Ω–∏–µ</li>
                <li><strong>–ì–∞–ª–µ–æ–Ω—ã:</strong> –º–µ–¥–ª–µ–Ω–Ω—ã–µ, 2-3 –ø–æ–ø–∞–¥–∞–Ω–∏—è, —Å—Ç—Ä–µ–ª—è—é—Ç</li>
                <li><strong>–û—Å—Ç—Ä–æ–≤–∞:</strong> –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è —Å –ø–∞–ª—å–º–∞–º–∏</li>
                <li><strong>–í–æ–¥–æ–≤–æ—Ä–æ—Ç—ã:</strong> —Ç–µ–ª–µ–ø–æ—Ä—Ç—ã</li>
            </ul>
        </div>
    </div>

    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º –º–æ–¥—É–ª–∏ -->
    <script src="game_controller.js"></script>
    <script src="game_logic.js"></script>
    <script src="game_renderer.js"></script>

    <script>
        /**
         * –ì–ª–∞–≤–Ω—ã–π –∫–ª–∞—Å—Å –∏–≥—Ä—ã Sea Defenders
         * –û–±—ä–µ–¥–∏–Ω—è–µ—Ç –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä, –ª–æ–≥–∏–∫—É –∏ —Ä–µ–Ω–¥–µ—Ä–µ—Ä
         */
        class SeaDefendersGame {
            constructor() {
                this.canvas = document.getElementById('gameCanvas');
                this.controller = new GameController();
                this.logic = new GameLogic();
                this.renderer = new GameRenderer(this.canvas);
                
                this.lastTime = 0;
                this.isRunning = true;
                
                this.gameLoop();
            }
            
            gameLoop(currentTime = 0) {
                if (!this.isRunning) return;
                
                // –í—ã—á–∏—Å–ª—è–µ–º deltaTime
                const deltaTime = currentTime - this.lastTime;
                this.lastTime = currentTime;
                
                // –ü–æ–ª—É—á–∞–µ–º –≤–≤–æ–¥ –æ—Ç –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞
                const input = this.controller.getInput();
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –∏–≥—Ä–æ–≤—É—é –ª–æ–≥–∏–∫—É
                this.logic.update(input, deltaTime);
                
                // –ü–æ–ª—É—á–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã
                const gameState = this.logic.getGameState();
                
                // –†–µ–Ω–¥–µ—Ä–∏–º –∏–≥—Ä—É
                this.renderer.render(gameState);
                
                // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å—Ç—Ä–µ–ª—å–±—ã
                if (input.fire) {
                    this.controller.resetFire();
                }
                
                // –ü—Ä–æ–¥–æ–ª–∂–∞–µ–º –∏–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª
                requestAnimationFrame((time) => this.gameLoop(time));
            }
            
            // –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏–≥—Ä—ã
            stop() {
                this.isRunning = false;
            }
            
            // –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã
            start() {
                this.isRunning = true;
                this.lastTime = 0;
                this.gameLoop();
            }
        }
        
        // –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.addEventListener('load', () => {
            const game = new SeaDefendersGame();
            
            // –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ—Ç–µ—Ä–∏ —Ñ–æ–∫—É—Å–∞ (–ø–∞—É–∑–∞)
            window.addEventListener('blur', () => {
                if (game.logic.gameState.state === 'PLAYING') {
                    game.logic.gameState.state = 'PAUSED';
                    game.logic.gameState.selectedItem = 0;
                }
            });
            
            // –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–æ–∑–≤—Ä–∞—Ç–∞ —Ñ–æ–∫—É—Å–∞
            window.addEventListener('focus', () => {
                // –ò–≥—Ä–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
            });
            
            // –û–±—Ä–∞–±–æ—Ç–∫–∞ ESC –¥–ª—è –ø–∞—É–∑—ã
            document.addEventListener('keydown', (e) => {
                if (e.code === 'Escape') {
                    if (game.logic.gameState.state === 'PLAYING') {
                        game.logic.gameState.state = 'PAUSED';
                        game.logic.gameState.selectedItem = 0;
                    } else if (game.logic.gameState.state === 'PAUSED') {
                        game.logic.gameState.state = 'PLAYING';
                    }
                }
            });
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–æ–≤ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –æ–∫–Ω–∞
            window.addEventListener('resize', () => {
                game.logic.SCREEN_WIDTH = window.innerWidth;
                game.logic.SCREEN_HEIGHT = window.innerHeight;
            });
        });
    </script>
</body>
</html>
